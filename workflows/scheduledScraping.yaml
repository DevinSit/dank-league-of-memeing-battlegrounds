main:
  steps:
    - scrapePosts:
        call: http.get
        args:
          url: https://us-central1-serverless-hackathon-devin.cloudfunctions.net/scrapePosts
        result: postsResult

    - ingestPosts:
        call: http.post
        args:
          url: https://us-central1-serverless-hackathon-devin.cloudfunctions.net/ingestPosts
          body:
            posts: ${postsResult.body.posts}
        result: imageHashesResult

    - predict:
        call: http.post
        args:
          url: https://us-central1-serverless-hackathon-devin.cloudfunctions.net/predict
          body:
            imageHashes: ${imageHashesResult.body.imageHashes}
        result: predictionsResult

    - returnResult:
        return: ${predictionsResult.body.predictions}